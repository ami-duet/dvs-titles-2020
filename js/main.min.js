/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
function appendViz(){const t=d3.scaleLinear().domain([d3.min(groupsSumPeople),d3.max(groupsSumPeople)]).range([30,300]),a=d3.scaleLinear().domain([0,d3.max(numChar)]).range([0,160]),e=d3.scaleLinear().domain([1,d3.max(numPeopleWithJobTitle)]).range([2,20]),i=d3.select("#titles-viz").append("svg").attr("width",vizWidth).attr("height",vizHeight),s=i.append("g").attr("class","arches").attr("fill-opacity",.62).attr("stroke","none");let r=0;data.forEach(i=>{const n=s.append("g").attr("class",i.sct_id),l=n.append("foreignObject").attr("class","family-description-wrapper").attr("x",0).attr("y",r).attr("width",vizWidth).attr("height",215).append("xhtml:div").append("div").attr("class",`family-description family-description--${i.sct_id}`);l.append("h3").attr("class","sct-label").html(`${i.sct_label}:`),l.append("div").attr("class","stats-people").html(`${i.groups.length} groups, ${i.sctSumPeople} people`),l.append("div").attr("class","stats-leaders").html(`${i.sctSumLeaders} in leadership position`),r+=215,i.groups.forEach(i=>{const s=n.append("g").attr("class",`arches-group group_${i.group_id}`),l=Math.ceil(t(i.sumPeople)),p=r+l,o=l/2+r,d=l/4;s.selectAll("path").data(i.titles).join("path").attr("class",t=>`arch arch-${t.uid}`).attr("d",t=>{const i=Math.ceil(a(t.num_char)),s=Math.ceil(e(t.num_people));return`M${mainAxisX},${r} C${i/1.5+mainAxisX},${(p-r)/10+r} ${i-s/2+mainAxisX},${o-d} ${i-s/2+mainAxisX},${o} C${i-s/2+mainAxisX},${o+d} ${i/1.5+mainAxisX},${9*(p-r)/10+r} ${mainAxisX},${p} ${i/1.4+mainAxisX},${9*(p-r)/10+r} ${i+s/2+mainAxisX},${o+d} ${i+s/2+mainAxisX},${o} C${i+s/2+mainAxisX},${o-d} ${i/1.4+mainAxisX},${(p-r)/10+r} ${mainAxisX},${r} Z`}).attr("fill",t=>t.color).attr("transform",t=>t.isFreelance?`rotate(180, ${mainAxisX}, ${o})`:null).on("mouseover",(t,a)=>{t.stopPropagation(),handleMouseOver(t,a)}).on("mouseout",t=>handleMouseOut(t));const c=s.append("foreignObject").attr("class","group-label-wrapper").attr("x",0).attr("width",vizWidth/2),h=c.append("xhtml:div").append("div").attr("class","group-label").html(i.group_label).node().getBoundingClientRect().height;c.attr("y",o-h/2).attr("height",h),r=p})}),i.attr("height",r)}getScaleInfo();