/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
let data=[];const sections=[{sct_id:"it_sct",groups:[{group_id:"dev",group_label:"Developers"},{group_id:"it",group_label:"IT Specialists"},{group_id:"eng",group_label:"Engineers"},{group_id:"scientist",group_label:"Scientists"}]},{sct_id:"data_science_sct",groups:[{group_id:"data_specialist",group_label:"Data Scientists"},{group_id:"bi",group_label:"Business Intelligence"},{group_id:"analyst",group_label:"Analysts"},{group_id:"analytics",group_label:"Analytics Specialists"},{group_id:"librarian",group_label:"Librarians"},{group_id:"geo",group_label:"Geographic & Geospatial"},{group_id:"dataviz",group_label:"Data Visualization Specialists"}]},{sct_id:"design_comm_sct",groups:[{group_id:"journalist",group_label:"Journalist"},{group_id:"designer",group_label:"Designers"},{group_id:"artist",group_label:"Artists"},{group_id:"writer",group_label:"Writers & Editors"},{group_id:"social_public",group_label:"Social Sciences & Public service"},{group_id:"comm_marketing",group_label:"Communications & Marketing"}]},{sct_id:"business_sct",groups:[{group_id:"business_dev_op",group_label:"Business Development & Operations"},{group_id:"finance_economy",group_label:"Finances & Economy"},{group_id:"merl",group_label:"Monitoring, Evaluation & Performance"}]},{sct_id:"learning_sct",groups:[{group_id:"teacher",group_label:"Teachers & Professors"},{group_id:"student",group_label:"Students"},{group_id:"postdoc",group_label:"PostDoctoral"},{group_id:"research",group_label:"Researchers"},{group_id:"support",group_label:"Support staff"}]},{sct_id:"unknown_sct",groups:[{group_id:"freelance_consultant",group_label:"Consultants & Freelancers"},{group_id:"manager",group_label:"Managers"},{group_id:"head",group_label:"Executives & Founders"},{group_id:"dir",group_label:"Directors & Supervisors"}]},{sct_id:"another_sct",groups:[{group_id:"unemployed",group_label:"Unemployed"},{group_id:"another",group_label:"Another"}]}];sections.forEach(e=>{let o={};o.sct_id=e.sct_id,o.groups=[],e.groups.forEach(e=>{let r={};r.group_id=e.group_id,r.group_label=e.group_label,r.sumPeople=0,r.titles=[],r.sumSeniors=0,r.sumLeaders=0,r.sumFreelancers=0,o.groups.push(r)}),data.push(o)}),d3.csv("../data/data_job_titles.csv").then(e=>{e.forEach(e=>{const o=data.find(o=>o.sct_id===e.section).groups.find(o=>o.group_id===e.group);let r={};r.uid=e.uid,r.num_char=parseInt(e.num_char),r.job_title=e.job_title,r.num_people=parseInt(e.num_people),o.sumPeople+=r.num_people,r.isFreelance=""!==e.pos_freelance,r.fields=[],fields.forEach(o=>{"1"===e[o.field_id]&&r.fields.push(o.field_id)}),o.titles.push(r),r.color=1===r.fields.length?fields.find(e=>e.field_id===r.fields[0]).field_color:mixColors(r.fields),""!==e.pos_senior&&(o.sumSeniors+=parseInt(e.pos_senior)),""!==e.pos_lead&&(o.sumLeaders+=parseInt(e.pos_lead)),""!==e.pos_freelance&&(o.sumFreelancers+=parseInt(e.pos_freelance))}),console.log(data),getScaleInfo()});