/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
let data=[];const sections=[{sct_id:"it_sct",sct_label:"The green family",groups:[{group_id:"data_specialist",group_label:"Data Scientists"},{group_id:"bi",group_label:"Business Intelligence"},{group_id:"analyst",group_label:"Analysts"},{group_id:"analytics",group_label:"Analytics Specialists"},{group_id:"librarian",group_label:"Librarians"},{group_id:"geo",group_label:"Geographic & Geospatial"},{group_id:"dataviz",group_label:"Data Visualization Specialists"},{group_id:"dev",group_label:"Developers"},{group_id:"it",group_label:"IT Specialists"},{group_id:"eng",group_label:"Engineers"},{group_id:"scientist",group_label:"Scientists"}]},{sct_id:"design_comm_sct",sct_label:"The red family",groups:[{group_id:"journalist",group_label:"Journalists"},{group_id:"designer",group_label:"Designers"},{group_id:"artist",group_label:"Artists"},{group_id:"writer",group_label:"Writers & Editors"},{group_id:"social_public",group_label:"Social Sciences & Public service"},{group_id:"comm_marketing",group_label:"Communications & Marketing"}]},{sct_id:"business_sct",sct_label:"The blue family",groups:[{group_id:"business_dev_op",group_label:"Business Development & Operations"},{group_id:"finance_economy",group_label:"Finances & Economy"},{group_id:"merl",group_label:"Monitoring, Evaluation & Performance"}]},{sct_id:"learning_sct",sct_label:"The orange family",groups:[{group_id:"teacher",group_label:"Teachers & Professors"},{group_id:"student",group_label:"Students"},{group_id:"postdoc",group_label:"PostDoctoral"},{group_id:"research",group_label:"Researchers"},{group_id:"support",group_label:"Support staff"}]},{sct_id:"unknown_sct",sct_label:"The almond family",groups:[{group_id:"freelance_consultant",group_label:"Consultants & Freelancers"},{group_id:"manager",group_label:"Managers"},{group_id:"head",group_label:"Executives & Founders"},{group_id:"dir",group_label:"Directors & Supervisors"},{group_id:"unemployed",group_label:"Unemployed"},{group_id:"another",group_label:"Another"}]}];sections.forEach(e=>{let s={};s.sct_id=e.sct_id,s.sct_label=e.sct_label,s.sctSumPeople=0,s.sctSumLeaders=0,s.groups=[],e.groups.forEach(e=>{let o={};o.group_id=e.group_id,o.group_label=e.group_label,o.sumPeople=0,o.titles=[],o.sumSeniors=0,o.sumLeaders=0,o.sumFreelancers=0,s.groups.push(o)}),data.push(s)}),d3.csv("../data/data_job_titles.csv").then(e=>{e.forEach(e=>{const s=data.find(s=>s.sct_id===e.section),o=s.groups.find(s=>s.group_id===e.group);let l={};l.uid=e.uid,l.num_char=parseInt(e.num_char),l.job_title=e.job_title,l.num_people=parseInt(e.num_people),s.sctSumPeople+=l.num_people,o.sumPeople+=l.num_people,l.isFreelance=""!==e.pos_freelance,l.fields=[],fields.forEach(s=>{"1"===e[s.field_id]&&l.fields.push(s.field_id)}),o.titles.push(l),l.color=1===l.fields.length?fields.find(e=>e.field_id===l.fields[0]).field_color:mixColors(l.fields),""!==e.pos_senior&&(o.sumSeniors+=parseInt(e.pos_senior)),""!==e.pos_lead&&(o.sumLeaders+=parseInt(e.pos_lead),s.sctSumLeaders+=parseInt(e.pos_lead)),""!==e.pos_freelance&&(o.sumFreelancers+=parseInt(e.pos_freelance))}),console.log(data),getScaleInfo()});