/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
let data=[];const sections=[{sct_id:"data_science_sct",groups:["data_specialist","bi","analyst","analytics","librarian","geo","dataviz"]}];sections.forEach(e=>{let s={};s.sct_id=e.sct_id,s.groups=[],e.groups.forEach(e=>{let a={};a.group_id=e,a.sumPeople=0,a.titles=[],a.sumSeniors=0,a.sumLeaders=0,a.sumFreelancers=0,s.groups.push(a)}),data.push(s)}),d3.csv("../data/data_job_titles.csv").then(e=>{e.forEach(e=>{const s=data.find(s=>s.sct_id===e.section).groups.find(s=>s.group_id===e.group);let a={};a.uid=e.uid,a.num_char=parseInt(e.num_char),a.job_title=e.job_title,a.num_people=parseInt(e.num_people),s.sumPeople+=a.num_people,a.isFreelance=""!==e.pos_freelance,a.fields=[],fields.forEach(s=>{"1"===e[s.field_id]&&a.fields.push(s.field_id)}),s.titles.push(a),a.color=1===a.fields.length?fields.find(e=>e.field_id===a.fields[0]).field_color:mixColors(a.fields),""!==e.pos_senior&&(s.sumSeniors+=parseInt(e.pos_senior)),""!==e.pos_lead&&(s.sumLeaders+=parseInt(e.pos_lead)),""!==e.pos_freelance&&(s.sumFreelancers+=parseInt(e.pos_freelance))}),console.log(data),getScaleInfo()});